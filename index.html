<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite GAG - Finalizado</title>
<style>
/* *** AVISO IMPORTANTE ***
    Para que este c√≥digo funcione corretamente, certifique-se de que os arquivos:
    - GAGsaw.jpg (A imagem de susto)
    - babi2k.mp3 (O √°udio de fundo)
    ... ESTEJAM NO MESMO DIRET√ìRIO DESTE ARQUIVO HTML.
*/
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0a1f0a 0%, #1a3a1a 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    position: relative;
    overflow-x: hidden;
    overflow-y: auto;
}

body::before {
    content: '';
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(191, 247, 163, 0.03) 0%, transparent 50%);
    animation: float 20s ease-in-out infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(30px, 30px) scale(1.1); }
}

/* Sangue realista escorrendo */
.blood-drip {
    position: fixed;
    width: 2px;
    background: linear-gradient(180deg, 
        rgba(100, 0, 0, 1) 0%, 
        rgba(120, 10, 10, 0.95) 15%,
        rgba(139, 0, 0, 0.9) 30%,
        rgba(139, 0, 0, 0.7) 60%,
        rgba(100, 0, 0, 0.4) 85%,
        transparent 100%);
    animation: drip 5s ease-in infinite;
    pointer-events: none;
    z-index: 999;
    filter: blur(0.3px);
    box-shadow: 0 0 1px rgba(139, 0, 0, 0.8);
}

@keyframes drip {
    0% { 
        height: 0; 
        opacity: 0;
        filter: blur(0px);
    }
    5% { 
        opacity: 1;
        filter: blur(0.2px);
    }
    15% {
        filter: blur(0.3px);
    }
    100% { 
        height: 85vh; 
        opacity: 0;
        filter: blur(0.5px);
    }
}

.blood-drip:nth-child(1) { left: 12%; animation-delay: 0.3s; width: 1.5px; background: linear-gradient(180deg, rgba(90, 0, 0, 1) 0%, rgba(110, 5, 5, 0.95) 15%, rgba(130, 0, 0, 0.85) 35%, rgba(120, 0, 0, 0.6) 65%, transparent 100%); }
.blood-drip:nth-child(2) { left: 28%; animation-delay: 1.8s; width: 3px; animation-duration: 6s; }
.blood-drip:nth-child(3) { left: 47%; animation-delay: 0.9s; width: 2.5px; animation-duration: 5.5s; }
.blood-drip:nth-child(4) { left: 68%; animation-delay: 2.3s; width: 2px; }
.blood-drip:nth-child(5) { left: 84%; animation-delay: 1.2s; width: 1.8px; background: linear-gradient(180deg, rgba(95, 0, 0, 1) 0%, rgba(115, 8, 8, 0.93) 20%, rgba(135, 0, 0, 0.8) 40%, rgba(115, 0, 0, 0.5) 70%, transparent 100%); }

/* Escurecimento da tela ao clicar */
.screen-darken {
    position: fixed;
    inset: 0;
    background: #000;
    opacity: 0;
    pointer-events: none;
    z-index: 9998;
    transition: opacity 0.6s ease-out;
}

.screen-darken.active {
    opacity: 0.85;
}

.screen-flash {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, rgba(139, 0, 0, 0.6) 0%, transparent 70%);
    opacity: 0;
    pointer-events: none;
    z-index: 9999;
    animation: flash 0.2s ease-out;
}

@keyframes flash {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

.horror-transition {
    position: fixed;
    inset: 0;
    background: #000;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 99998;
    pointer-events: none;
}

.horror-transition.active {
    display: flex;
    animation: horrorFade 4s ease-in-out forwards;
}

@keyframes horrorFade {
    0% { opacity: 0; }
    15% { opacity: 1; }
    85% { opacity: 1; }
    100% { opacity: 0; }
}

.horror-transition svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    animation: slowZoom 4s ease-in-out;
}

@keyframes slowZoom {
    0% { transform: scale(1.5); filter: brightness(0.3); }
    50% { transform: scale(1); filter: brightness(0.8); }
    100% { transform: scale(1.2); filter: brightness(0.4); }
}

/* Efeito SHAKE (Tremor) */
@keyframes shake {
    0%, 100% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(3px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(1px, 2px) rotate(0deg); }
}

#audioToggle {
    position: fixed;
    top: 25px;
    right: 25px;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(191, 247, 163, 0.3);
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 0 15px rgba(191, 247, 163, 0.1);
    color: #BFF7A3;
}

#audioToggle:hover {
    background: rgba(255, 255, 255, 0.12);
    transform: scale(1.08);
}

#app-container {
    position: relative;
    z-index: 10;
    width: 100%;
    max-width: 500px;
    transition: opacity 0.4s ease;
}

.card {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 60px 45px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4), inset 0 0 30px rgba(191, 247, 163, 0.08);
    text-align: center;
    position: relative;
    border: 1px solid rgba(191, 247, 163, 0.25);
    animation: fadeIn 0.9s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(35px); }
    to { opacity: 1; transform: translateY(0); }
}

.blur-overlay {
    position: relative;
    cursor: pointer;
}

.blur-content {
    filter: blur(15px);
    opacity: 0.5;
    transition: all 0.3s ease;
}

.click-hint {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3rem;
    color: #BFF7A3;
    font-weight: 700;
    text-shadow: 0 0 30px rgba(191, 247, 163, 0.8);
    pointer-events: none;
    animation: pulse-hint 2s ease-in-out infinite;
    z-index: 1;
}

@keyframes pulse-hint {
    0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
}

.gagsaw-image {
    width: 200px;
    height: 200px;
    margin: 0 auto 35px;
    position: relative;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(191, 247, 163, 0.4);
    box-shadow: 0 0 30px rgba(191, 247, 163, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5);
    animation: pulse-glow 3s ease-in-out infinite;
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 30px rgba(191, 247, 163, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.5); transform: scale(1); }
    50% { box-shadow: 0 0 50px rgba(191, 247, 163, 0.5), 0 0 80px rgba(191, 247, 163, 0.2), inset 0 0 30px rgba(0, 0, 0, 0.6); transform: scale(1.03); }
}

.gagsaw-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.9) contrast(1.1);
}

.page {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.page.active {
    display: block;
    opacity: 1;
}

.next {
    display: inline-block;
    margin-top: 25px;
    padding: 16px 45px;
    background: rgba(191, 247, 163, 0.15);
    backdrop-filter: blur(10px);
    color: #BFF7A3;
    text-decoration: none;
    border-radius: 50px;
    font-size: 0.85rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    transition: all 0.3s ease;
    font-weight: 600;
    border: 2px solid rgba(191, 247, 163, 0.4);
    box-shadow: 0 0 20px rgba(191, 247, 163, 0.3);
    cursor: pointer;
}

.next:hover {
    background: rgba(191, 247, 163, 0.25);
    border-color: rgba(191, 247, 163, 0.6);
    transform: translateY(-3px);
}

.info-card {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 60px 45px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4), inset 0 0 30px rgba(191, 247, 163, 0.08);
    border: 1px solid rgba(191, 247, 163, 0.25);
    text-align: center;
}

.info-card h2 {
    font-size: 2.5rem;
    color: #BFF7A3;
    margin-bottom: 35px;
    font-weight: 700;
    letter-spacing: 3px;
    text-shadow: 0 0 20px rgba(191, 247, 163, 0.5);
}

.info-card p {
    color: #d0f0c0;
    font-size: 1.15rem;
    line-height: 1.9;
    margin-bottom: 28px;
    font-weight: 300;
}

.info-card ul {
    list-style: none;
    text-align: left;
    margin: 35px 0;
    padding: 30px 0;
    border-top: 1px solid rgba(191, 247, 163, 0.2);
    border-bottom: 1px solid rgba(191, 247, 163, 0.2);
}

.info-card li {
    color: #e8f8e0;
    font-size: 1.05rem;
    margin-bottom: 20px;
    padding-left: 30px;
    position: relative;
    line-height: 1.7;
    font-weight: 300;
}

.info-card li:last-child {
    margin-bottom: 0;
}

.info-card li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 8px;
    width: 8px;
    height: 8px;
    background: #BFF7A3;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(191, 247, 163, 0.8);
}

.info-card strong {
    font-weight: 600;
    color: #BFF7A3;
}

#final-gag {
    background: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 70px 45px;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4), inset 0 0 30px rgba(191, 247, 163, 0.08);
    border: 1px solid rgba(191, 247, 163, 0.25);
    text-align: center;
    animation: fadeIn 0.9s ease, jumpBox 0.8s ease-in-out infinite;
    font-size: 1.8rem;
    color: #e8f8e0;
    line-height: 1.8;
    position: relative;
    overflow: hidden;
}

/* Anima√ß√£o de pulo do quadrado */
@keyframes jumpBox {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

/* Sangue escorrendo dentro do quadrado - realista */
.blood-drip-inside {
    position: absolute;
    width: 2px;
    background: linear-gradient(180deg, 
        rgba(100, 0, 0, 1) 0%, 
        rgba(120, 10, 10, 0.95) 10%,
        rgba(139, 0, 0, 0.9) 25%,
        rgba(139, 0, 0, 0.75) 50%,
        rgba(120, 0, 0, 0.5) 75%,
        rgba(100, 0, 0, 0.3) 90%,
        transparent 100%);
    animation: dripInside 6s ease-in infinite;
    pointer-events: none;
    z-index: 1;
    filter: blur(0.2px);
    box-shadow: 0 0 0.5px rgba(139, 0, 0, 0.6);
}

@keyframes dripInside {
    0% {
        height: 0;
        opacity: 0;
    }
    8% {
        opacity: 1;
    }
    100% {
        height: calc(100% - 60px);
        opacity: 0;
    }
}

.blood-drip-inside:nth-child(1) { left: 18%; animation-delay: 0.5s; width: 1.5px; animation-duration: 5.5s; }
.blood-drip-inside:nth-child(2) { left: 35%; animation-delay: 1.8s; width: 2.5px; animation-duration: 7s; }
.blood-drip-inside:nth-child(3) { left: 52%; animation-delay: 0.9s; width: 2px; }
.blood-drip-inside:nth-child(4) { left: 68%; animation-delay: 2.5s; width: 1.8px; animation-duration: 6.5s; }
.blood-drip-inside:nth-child(5) { left: 82%; animation-delay: 1.3s; width: 2.2px; animation-duration: 5.8s; }

#final-gag-text {
    position: relative;
    z-index: 2;
}

/* Efeitos de glitch e distor√ß√£o */
.glitch-effect {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 9997;
    opacity: 0;
    pointer-events: none;
    mix-blend-mode: difference;
    display: none;
}

.glitch-effect.active {
    display: block;
    animation: glitchFlash 0.5s steps(5) 3;
}

@keyframes glitchFlash {
    0%, 100% { opacity: 0; }
    10%, 30%, 50%, 70%, 90% { opacity: 1; }
    20%, 40%, 60%, 80% { opacity: 0; }
}

/* Efeito VHS */
.vhs-effect {
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.1) 0px, rgba(0, 0, 0, 0.1) 1px, transparent 1px, transparent 2px);
    pointer-events: none;
    z-index: 9996;
    opacity: 0;
    animation: vhsScan 0.1s linear infinite;
    display: none;
}

.vhs-effect.active {
    display: block;
    opacity: 0.4;
}

@keyframes vhsScan {
    0% { transform: translateY(0); }
    100% { transform: translateY(2px); }
}

/* Mensagens subliminares */
.subliminal-message {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 5rem;
    font-weight: 900;
    color: #ff0000;
    text-shadow: 0 0 30px #ff0000;
    z-index: 99999;
    pointer-events: none;
    background: rgba(0, 0, 0, 0.9);
    animation: subliminalFlash 0.15s ease-out;
}

.subliminal-message.active {
    display: flex;
}

@keyframes subliminalFlash {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

/* Sombra de figura humana */
.shadow-figure {
    position: fixed;
    bottom: -100%;
    width: 200px;
    height: 400px;
    background: radial-gradient(ellipse, rgba(0, 0, 0, 0.9) 0%, transparent 70%);
    z-index: 5;
    opacity: 0;
    pointer-events: none;
    display: none;
}

.shadow-figure.active {
    display: block;
    animation: figureWalk 3s ease-in-out forwards;
}

@keyframes figureWalk {
    0% { bottom: -100%; opacity: 0; transform: translateX(-50px); }
    30% { opacity: 0.8; }
    70% { opacity: 0.8; }
    100% { bottom: -100%; opacity: 0; transform: translateX(150vw); }
}

/* NOVO: JUMPSCARE FINAL EM TELA CHEIA (Ap√≥s o bot√£o '√â ISSO NEGAS') */
#final-jumpscare {
    position: fixed;
    inset: 0;
    background: #000;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100000;
    opacity: 0;
    transition: opacity 0.1s ease-out;
}
#final-jumpscare.active {
    display: flex;
    opacity: 1;
}

#jumpscare-image-container {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Aplicando o tremor */
    animation: shake 0.1s ease-in-out infinite; 
}

#jumpscare-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover; 
    filter: contrast(1.5) saturate(2) brightness(1.2); 
}

/* Efeitos de olhos e outros que n√£o foram completamente definidos no CSS anterior, mas mantidos para compatibilidade */
.following-eyes, .demon-eyes, .shadow-creep, .heartbeat-pulse, .ambient-fog, .whisper-text, .screen-crack, .blood-footprint, .creepy-hand, .blood-stain, #horrorTransition1, #horrorTransition2 {
    /* Garante que estes elementos fiquem ocultos at√© serem ativados pelo JS */
    display: none; 
}

@media (max-width: 600px) {
    .card, .info-card, #final-gag { padding: 50px 35px; }
    .click-hint { font-size: 2.5rem; }
    .gagsaw-image { width: 160px; height: 160px; }
    .info-card h2 { font-size: 2rem; }
    .subliminal-message { font-size: 3rem; }
}
</style>
</head>
<body>

    <div class="blood-drip"></div>
    <div class="blood-drip"></div>
    <div class="blood-drip"></div>
    <div class="blood-drip"></div>
    <div class="blood-drip"></div>

    <div class="screen-darken" id="screenDarken"></div>

    <div class="subliminal-message" id="subliminalMsg"></div>

    <div class="shadow-figure" id="shadowFigure"></div>

    <div id="final-jumpscare">
        <div id="jumpscare-image-container">
            <img src="GAGsaw.jpg" alt="Jumpscare Final">
        </div>
    </div>

    <audio id="screamSound" src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGnODyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77FeFg=="></audio>
    <audio id="breathSound"></audio>
    <audio id="laughSound"></audio>

    <div class="glitch-effect" id="glitchEffect"></div>
    <div class="vhs-effect" id="vhsEffect"></div>
    <div class="shadow-creep" id="shadowCreep"></div>
    <div class="heartbeat-pulse" id="heartbeatPulse"></div>
    <div class="ambient-fog" id="ambientFog1" style="left: 10%; top: 20%;"></div>
    <div class="ambient-fog" id="ambientFog2" style="right: 15%; top: 40%;"></div>
    <div class="ambient-fog" id="ambientFog3" style="left: 20%; bottom: 30%;"></div>
    <div class="demon-eyes" id="demonEyesLeft" style="left: 20px; top: 30%;"></div>
    <div class="demon-eyes" id="demonEyesRight" style="right: 20px; top: 40%;"></div>
    <div class="following-eyes" id="followingEyes1" style="left: 50px; top: 30%;"></div>
    <div class="following-eyes" id="followingEyes2" style="right: 50px; top: 50%;"></div>
    <div class="screen-crack" id="screenCrack"></div>
    <div class="creepy-hand left" id="creepyHandLeft"></div>
    <div class="creepy-hand right" id="creepyHandRight"></div>
    <div class="blood-footprint" id="footprint1"></div>
    <div class="blood-footprint" id="footprint2"></div>
    <div class="blood-footprint" id="footprint3"></div>
    <div class="blood-stain" id="bloodStain"></div>
    <div class="horror-transition" id="horrorTransition1"></div>
    <div class="horror-transition" id="horrorTransition2"></div>

    <audio id="bgAudio" src="babi2k.mp3" loop></audio>
    <button id="audioToggle">üîä</button>

    <div id="app-container">
        <div id="page1" class="page active">
            <div class="blur-overlay" id="blurOverlay">
                <div class="click-hint">CLICA AQUI PUT@</div>
                <div class="blur-content">
                    <div class="card">
                        <h2 style="font-size: 2.5rem; color: #BFF7A3; margin-bottom: 35px; font-weight: 700; letter-spacing: 3px; text-shadow: 0 0 20px rgba(191, 247, 163, 0.5);">ATEN√á√ÉO, GAG!</h2>
                        <p style="color: #d0f0c0; font-size: 1.15rem; line-height: 1.9; margin-bottom: 28px; font-weight: 300;">O evento mais GAG do ano ser√°:</p>
                        <ul style="list-style: none; text-align: left; margin: 35px 0; padding: 30px 0; border-top: 1px solid rgba(191, 247, 163, 0.2); border-bottom: 1px solid rgba(191, 247, 163, 0.2);">
                            <li style="color: #e8f8e0; font-size: 1.05rem; margin-bottom: 20px; padding-left: 30px; position: relative; line-height: 1.7; font-weight: 300;"><strong style="font-weight: 600; color: #BFF7A3;">DATA:</strong> XXXX</li>
                            <li style="color: #e8f8e0; font-size: 1.05rem; margin-bottom: 20px; padding-left: 30px; position: relative; line-height: 1.7; font-weight: 300;"><strong style="font-weight: 600; color: #BFF7A3;">HORA:</strong> XXXX</li>
                            <li style="color: #e8f8e0; font-size: 1.05rem; margin-bottom: 0; padding-left: 30px; position: relative; line-height: 1.7; font-weight: 300;"><strong style="font-weight: 600; color: #BFF7A3;">LOCAL:</strong> XXXX</li>
                        </ul>
                        <p style="color: #d0f0c0; font-size: 1.15rem; line-height: 1.9; margin-bottom: 28px; font-weight: 300;">... Clica para ver as informa√ß√µes completas e a foto do GAGsaw!</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="page2" class="page">
            <div class="info-card">
                <div class="gagsaw-image">
                    <img src="GAGsaw.jpg" alt="GAGsaw">
                </div>
                <h2>INFORMA√á√ïES SECRETAS</h2>
                <p>O evento mais GAG do ano √©:</p>
                <ul>
                    <li><strong>DATA:</strong> 31 de Dezembro, 2025 (Fim de Ano)</li>
                    <li><strong>HORA:</strong> A partir das 22h00</li>
                    <li><strong>LOCAL:</strong> A Casa do Puto, Rua das Gags, N¬∫ 69</li>
                </ul>
                <p>... E prepara-te para a regra de vestu√°rio!</p>
                <button class="next" data-page="page3">REVELAR O SEGREDO FINAL</button>
            </div>
        </div>

        <div id="page3" class="page">
            <div id="final-gag">
                <div class="blood-drip-inside"></div>
                <div class="blood-drip-inside"></div>
                <div class="blood-drip-inside"></div>
                <div class="blood-drip-inside"></div>
                <div class="blood-drip-inside"></div>
                <div id="final-gag-text">
                    PAREM DE SER OT√ÅRIOS. A REGRA √â...
                </div>
                <button class="next" id="final-susto-button" data-page="jumpscare" style="margin-top: 50px;">
                    √â ISSO NEGAS
                </button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Refer√™ncias aos elementos principais
    const audio = document.getElementById('bgAudio');
    const screamSound = document.getElementById('screamSound');
    const audioToggle = document.getElementById('audioToggle');
    const blurOverlay = document.getElementById('blurOverlay');
    const clickHint = document.querySelector('.click-hint');
    const nextButtons = document.querySelectorAll('.next');
    const appContainer = document.getElementById('app-container');
    const finalJumpscare = document.getElementById('final-jumpscare'); 
    
    // Refer√™ncias aos efeitos visuais
    const screenDarken = document.getElementById('screenDarken');
    const subliminalMsg = document.getElementById('subliminalMsg');
    const shadowFigure = document.getElementById('shadowFigure'); 
    const glitchEffect = document.getElementById('glitchEffect');
    const vhsEffect = document.getElementById('vhsEffect');
    const finalSustoButton = document.getElementById('final-susto-button');


    // Dura√ß√£o aumentada da mensagem subliminar (em milissegundos)
    const SUBLIMINAL_DURATION = 1500; 

    let isAudioPlaying = false;
    let currentPage = 'page1';

    // --- Fun√ß√µes Auxiliares de Efeitos ---

    function setActive(el, duration = 0) {
        el.classList.add('active');
        if (duration > 0) {
            setTimeout(() => {
                el.classList.remove('active');
            }, duration);
        }
    }
    
    // Dura√ß√£o da mensagem subliminar ATUALIZADA
    function triggerSubliminal(message) { 
        subliminalMsg.textContent = message;
        setActive(subliminalMsg, SUBLIMINAL_DURATION);
    }
    
    // Inicia o √°udio de fundo (Chamado no primeiro clique)
    function playAudioSafe() {
        if (!isAudioPlaying) {
            audio.play().then(() => {
                isAudioPlaying = true;
                audioToggle.textContent = 'üîä';
            }).catch(error => {
                console.error("Falha ao iniciar o √°udio de fundo:", error);
            });
        }
    }

    // --- NOVO: L√≥gica do Jumpscare Final de Tela Cheia ---
    function triggerFinalJumpscare() {
        // 1. Para o √°udio de fundo
        audio.pause(); 
        
        // 2. Escurece a tela e esconde o conte√∫do
        screenDarken.classList.add('active');
        appContainer.style.opacity = '0';
        
        // 3. Ativa o Jumpscare
        finalJumpscare.classList.add('active');

        // 4. Jumpscare subliminar curto no momento do susto
        triggerSubliminal("SAW", 800); 

        // 5. Toca o grito (se o arquivo estiver dispon√≠vel)
        screamSound.currentTime = 0; 
        screamSound.play().catch(e => console.error("Erro ao tocar GRITO:", e));
    }


    // --- L√≥gica de Navega√ß√£o ---

    function switchPage(targetPageId) {
        if (targetPageId === 'jumpscare') {
            triggerFinalJumpscare();
            return;
        }

        // Garante que o √°udio seja iniciado antes da transi√ß√£o (ap√≥s o clique inicial)
        playAudioSafe();

        setTimeout(() => {
            document.getElementById(currentPage).classList.remove('active');
            const targetPage = document.getElementById(targetPageId);
            targetPage.classList.add('active');
            currentPage = targetPageId;
            
            appContainer.style.opacity = '1';
            
            // Efeitos espec√≠ficos da p√°gina
            if (targetPageId === 'page2') {
                setActive(vhsEffect, 3000); 
            } else if (targetPageId === 'page3') {
                setActive(glitchEffect, 2000); 
            }

            // Limpa a escurid√£o
            screenDarken.classList.remove('active');
        }, 400); 
    }


    // --- Evento: Clique Inicial (Page 1 Blur) ---
    blurOverlay.addEventListener('click', () => {
        if (currentPage === 'page1') {
            
            playAudioSafe();

            // 1. Remove o blur e hint
            blurOverlay.classList.remove('blur-overlay');
            if(clickHint) blurOverlay.removeChild(clickHint);
            document.querySelector('.blur-content').style.filter = 'none';
            document.querySelector('.blur-content').style.opacity = '1';
            
            // 2. Escurece a tela para o susto leve
            setActive(screenDarken, 1500);
            
            // 3. Jumpscare leve e efeitos subliminares
            triggerSubliminal("RUN"); 
            setActive(shadowFigure, 3000); // Sombra aparece/anda

            // 4. Transi√ß√£o para Page 2 ap√≥s o susto leve
            setTimeout(() => {
                switchPage('page2');
            }, 1800); 
        }
    });

    // --- Evento: Bot√µes de Navega√ß√£o (.next) ---
    nextButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            const targetPageId = e.target.getAttribute('data-page');
            if (targetPageId) {
                // Se for o bot√£o final, n√£o faz o fade e vai direto para o jumpscare
                if (targetPageId === 'jumpscare') {
                    triggerFinalJumpscare();
                    return;
                }
                
                // Transi√ß√µes intermedi√°rias:
                setActive(screenDarken, 1000);
                triggerSubliminal("AGORA");
                
                setTimeout(() => {
                    switchPage(targetPageId);
                }, 1000);
            }
        });
    });

    // --- Evento: Toggle de √Åudio Manual ---
    audioToggle.addEventListener('click', () => {
        if (isAudioPlaying) {
            audio.pause();
            isAudioPlaying = false;
            audioToggle.textContent = 'üîá';
        } else {
            audio.play().then(() => {
                isAudioPlaying = true;
                audioToggle.textContent = 'üîä';
            }).catch(error => {
                console.error("Falha ao tocar o √°udio manual:", error);
            });
        }
    });

    // --- INICIALIZA√á√ÉO ---
    // Ativa efeitos ambientais iniciais
    document.querySelectorAll('.blood-drip').forEach(drip => drip.style.display = 'block');
    document.getElementById('ambientFog1').classList.add('active');
    document.getElementById('ambientFog2').classList.add('active');
    document.getElementById('ambientFog3').classList.add('active');
});
</script>
</body>
</html>
